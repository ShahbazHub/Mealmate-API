<kt-portlet>
  <!-- See prop => '../../_core/models/data-sources/_base.datasource.ts' (loading$) -->
  <kt-portlet-header [class]="'card-head-lg'">
    <!-- PORTLET LOADING | Binded to TABLE Datasource -->

    <ng-container ktPortletTitle>
      <span
        >Allergens <br />
        <small>List of Allergens</small>
      </span>
      <!-- For localisations we use @ngx-translate | See off. documentations => https://github.com/ngx-translate/core -->
      <!-- Localization libraries (en/fr) are here => '../../../.././config/i18n/en.ts|fr.ts' -->
    </ng-container>

    <ng-container ktPortletTools>
      <button
        (click)="addAllergens()"
        mat-raised-button
        matTooltip="Create new customer"
        color="primary"
        type="button"
      >
        <span translate="ECOMMERCE.CUSTOMERS.BRANCH">New Allergens</span>
      </button>
      <!-- Buttons (Material Angular) | See off.documenations 'https://material.angular.io/components/button/overview' -->
      <!-- mat-raised-button | Rectangular contained button w/ elevation  -->
    </ng-container>
  </kt-portlet-header>

  <kt-portlet-body>
    <div class="example-container mat-elevation-z8">
      <div
        class="example-loading-shade"
        *ngIf="isLoadingResults || isRateLimitReached"
      >
        <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
        <div class="example-rate-limit-reached" *ngIf="isRateLimitReached">
          GitHub's API rate limit has been reached. It will be reset in one
          minute.
        </div>
      </div>
      <mat-table
        #TableOneSort
        [dataSource]="dataSourceOne"
        matSort
        class="example-table"
        matSortActive="created"
        matSortDisableClear
        matSortDirection="asc"
      >
        <!--- Note that these columns can be defined in any order.
        The actual rendered columns are set as a property on the row definition" -->
        <!-- Number Column -->

        <!-- Title Column -->

        <ng-container matColumnDef="name">
          <mat-header-cell *matHeaderCellDef>Title</mat-header-cell>
          <mat-cell *matCellDef="let row"
            ><a (click)="fetchAllergensItems()" style="color: blue;">{{
              row.name
            }}</a></mat-cell
          >
        </ng-container>
        <!-- State Column -->
        <ng-container matColumnDef="description">
          <mat-header-cell *matHeaderCellDef>Description</mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.description }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="status">
          <mat-header-cell *matHeaderCellDef mat-sort-header
            >Status</mat-header-cell
          >
          <mat-cell *matCellDef="let row">
            <span
              class="label label-lg label-light-{{
                getItemCssClassByStatus(row.status)
              }} label-inline"
              >{{ getItemStatusString(row.status) }}</span
            >
          </mat-cell>
        </ng-container>

        <!-- Created Column -->
        <ng-container matColumnDef="created">
          <mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            disableClear="true"
          >
            Created
          </mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.created_at | date }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="actions">
          <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
          <mat-cell *matCellDef="let row">
            <ng-template ngxPermissionsOnly="canDeleteECommerceData">
              <button
                mat-icon-button
                color="primary"
                matTooltip="Edit Allergens"
                (click)="editAllergens(row)"
              >
                <mat-icon>create</mat-icon></button
              >&nbsp;
            </ng-template>

            <ng-template>
              <button
                mat-icon-button
                color="warn"
                matTooltip="Delete customer"
                type="button"
                (click)="deleteAllergens()"
              >
                <mat-icon>delete</mat-icon></button
              >&nbsp;
            </ng-template>
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumnsOne"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumnsOne"></mat-row>
      </mat-table>
      <mat-paginator
        #TableOnePaginator="matPaginator"
        [length]="resultsLength"
        [pageSize]="30"
      >
      </mat-paginator>
    </div>
  </kt-portlet-body>
</kt-portlet>
